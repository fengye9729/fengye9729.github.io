# 前端处理数据难，难在哪？

所谓的前端处理数据难，并不是指对某个确定数据的变化过程难，而是结合复杂的业务场景，可能会遇到一些挑战：

- 数据来源多样性
- 原始数据与展示数据的差异性
- 联动关系的定义与实现
- 缓存的处理（易失性缓存，持久性缓存）
- 前端路由导致的应用多入口的处理
- 跨端渲染导致的处理过程的差异
- 数据处理的时序控制

「数据来源的多样性」，指的是你展示的数据，可能来自不同的地方

- 默认值
- HTTP 请求
- WebSocket 消息
- localStorage 之类的本地缓存

很可能你的数据是这些东西共同导致的运算结果

补充：数据来源的多样性：可能来自 xhr, 数据格式是 json，可能来自用户的输入，也可能是鼠标，可能是 websocket 。。。每种数据格式不一，是异步不可控的。用户的输入可能是 action，可能是data。如何把所有的输入统一起来，这些数据，很可能形式不一，而最终显示到页面的数据，是需要对这些原始数据进行加工。这就体现了 「原始数据与展示数据的差异性」

图形界面的特点是冗余信息的展示，将原始数据，添加不同的辅助信息，转换后展现到页面。很可能同一份业务数据同时被多个组件以不同的形态展现，当这份业务数据变更的时候，为了整个应用的一体性，需要一定程度的联动更新。当整个应用中的数据被广泛复用，并且形态各异的时候，如何优雅的定义横跨整个应用的联动更新，是一个巨大的挑战

很多时候我们需要利用缓存来加速应用的加载与切换，如果缓存的使用遍及整个应用，业务代码的复杂度就会大幅提升。如何控制这个复杂度，很考验抽象程度

随着应用的单页化，使用了前端路由。针对大的应用，我们会拆分模块的加载过程，路由按需加载，相应的也需要拆分数据的加载过程。

但是，**前端路由的存在会导致应用的入口增加**，尤其存在多级路口的时候（嵌套路由），每个路由从其他路由跳转而来，还是第一次打开，或者通过刷新进入，这些都会导致每级路由数据加载过程不一致。

如果一个页面进行了服务端渲染，很可能它的部分数据是在服务端准备好的，而另外一些则是到了前端才去查询的，如果这些数据存在关联关系，如何设计数据获取过程，才能使得应用的逻辑更清晰，并且能以更小代价，把每块业务数据灵活地在前后端渲染之间切换？

当数据处理的过程存在时序关系的时候，如何更好的让这些时序清晰化？

[都说数据处理比较难，那么前端数据处理难点在哪里？](https://www.zhihu.com/question/57152155)
<!DOCTYPE html>
<html lang="zh-CN">

	<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg"
    crossorigin="anonymous">
  <title>Fe</title>
  <link rel="stylesheet" href="/css/typo.css">
  <link rel="stylesheet" href="/css/fonts.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/scroll.css">
<link rel="stylesheet" href="/css/prism-base16-ateliersulphurpool.light.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
	
	<body>
		<div class="container">
			<div class="nav">
  <div class="nav-title">
    <a href="/">Fe</a>
  </div>
  <div class="nav-toggle-nav">
    <i class="fy-menu"></i>
  </div>
</div>
			<div class="left-col">
  <div class="left-col-close">
    <i class="fy-cross"></i>
  </div>

  <div class="left-col-author-profile">
    <nav class="profile">
      <a class="profile-pic"><img src="/img/xiaomai.jpg"/></a>
      <h1 class="profile-title">Fe_</h1>
      <p class="profile-subtitle">无疾而终是常态</p>
    </nav>
    <nav class="social">
      
      <a class="twitter2" target="_blank" href="#" title="twitter2">
        <i class="fy-twitter2"></i>
      </a>
      
      <a class="facebook2" target="_blank" href="#" title="facebook2">
        <i class="fy-facebook2"></i>
      </a>
      
      <a class="github" target="_blank" href="#" title="github">
        <i class="fy-github"></i>
      </a>
      
      <a class="google" target="_blank" href="#" title="google">
        <i class="fy-google"></i>
      </a>
      
      <a class="dribbble2" target="_blank" href="#" title="dribbble2">
        <i class="fy-dribbble2"></i>
      </a>
      
      <a class="instagram2" target="_blank" href="#" title="instagram2">
        <i class="fy-instagram2"></i>
      </a>
      
      <a class="zhihu" target="_blank" href="#" title="zhihu">
        <i class="fy-zhihu"></i>
      </a>
      
      <a class="segmentfault" target="_blank" href="#" title="segmentfault">
        <i class="fy-segmentfault"></i>
      </a>
      
    </nav>
    <nav class="left-col-lists">
      <ul>
        
          <li class="">
            <a href="/">首页</a>
          </li>
        
          <li class="">
            <a href="/felearning">前端学习</a>
          </li>
        
          <li class="">
            <a href="/experience">日常心得</a>
          </li>
        
          <li class="">
            <a href="/about">关于我</a>
          </li>
        
          <li class="">
            <a href="/donation">捐赠</a>
          </li>
        
      </ul>
    </nav>
  </div>

  <footer class="left-col-footer">
     Copyright © Fe . 2018 • All rights reserved.<br/>
     浙ICP备18014378号-1
  </footer>
</div>
			<!-- <div class="left-col">
  <div class="left-sidebar-nav">
    <div class="sidebar-nav-title"><a href="#">最新文章</a></div>
    <div class="sidebar-nav-search"><i class="fy-search"></i></div>
  </div>
  <div class="left-sidebar-tags">
    <h2>文章分类</h2>
    <ul class="sidebar-tags">
      <li class="tag box-tag">前端学习1</li>
      <li class="tag box-tag">前端学习2</li>
      <li class="tag box-tag">前端学习3</li>
      <li class="tag box-tag">前端学习4</li>
    </ul>
  </div>
  <div class="left-sidebar-post">
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/04/27/index/"></a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2018-04-27 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2017/07/04/about-es5/">ES5 Notes</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2017-07-04 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2017/07/04/about-es6-vs-es5/">ES6 Notes</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2017-07-04 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/02/05/gitlab-ci/">关于gitlab-ci自动化部署的探索</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2018-02-05 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/03/08/gitlab-ci-error/">一个CSS模块导致的gitlab-ci报错</a></div>
        <div class="post-card-content-info">&lt;p&gt;项目用&lt;code&gt;gitlab-ci&lt;/code&gt;进行持续集成，遇到了一个问题至今虽已解决却仍存在一些困惑。&lt;br&gt;&lt;br&gt;</div>
        <div class="post-card-content-time">2018-03-08 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/03/16/闲言闲语/">闲言闲语</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2018-03-16 | 无评论</div>
      </div>
    </div>
    
  </div>
</div> -->
			<div class="right-col">
				<article class="article article-post">
  <div class="article-inner">
    <div class="article-header">
      <!-- <div class="article-info-tag">
        
          data
        
          length
        
          _model
        
          _schema
        
          count
        
          size
        
          forEach
        
          each
        
          toArray
        
          eq
        
          first
        
          last
        
          slice
        
          limit
        
          skip
        
          reverse
        
          shuffle
        
          random
        
          find
        
          findOne
        
          sort
        
          map
        
          reduce
        
          reduceRight
        
          filter
        
          every
        
          some
        
          update
        
          replace
        
          remove
        
          populate
        
      </div> -->
    </div>
    <div class="article-info">
      <div class="article-info-title">关于gitlab-ci自动化部署的探索</div>
      <div class="article-info-content"><a id="more"></a>
<h2 id="了解gitlab-ci的运行机制"><a href="#了解gitlab-ci的运行机制" class="headerlink" title="了解gitlab-ci的运行机制"></a>了解gitlab-ci的运行机制</h2><h2 id="开始使用gitlab-ci"><a href="#开始使用gitlab-ci" class="headerlink" title="开始使用gitlab-ci"></a>开始使用gitlab-ci</h2><p>GitLab提供持续集成服务。在项目中添加<code>.gitlab-ci.yml</code>文件，并且为<code>GitLab</code>项目配置使用<code>Runner</code>,那么每次提交推送后都将触发<code>CI pipeline</code><br><br><code>.gitlab-ci.yml</code>文件默认情况下有三个阶段,不需要全写</p>
<ul>
<li>build</li>
<li>test</li>
<li>deploy<br>当项目运行正常，你会得到绿色标志，如此，能够很容易看出提交是否导致测试失败。<!-- more -->
<h3 id="安装gitlab"><a href="#安装gitlab" class="headerlink" title="安装gitlab"></a>安装gitlab</h3><h3 id="安装gitlab-runner"><a href="#安装gitlab-runner" class="headerlink" title="安装gitlab runner"></a>安装gitlab runner</h3><code>gitlab runner</code>是用<code>Go</code>写的，它可以在Linux,macOS,Windows等操作系统上运行，因为我只有Windows，那么以下教程是安装在Windows下的</li>
</ul>
<ol>
<li>创建一个文件夹 <code>G:\GitLab-Runner</code></li>
<li>下载适合电脑的二进制文件，放入文件夹 <a href="https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-windows-amd64.exe" target="_blank" rel="external">X64</a>,讲二进制文件重命名为<code>gitlab-runner.exe</code></li>
<li>右键以管理员身份打开</li>
<li>注册Runner</li>
<li>将Runner作为服务安装并且启动会，推荐使用内置系统账户<pre><code>gitlab-runner install
gitlab-runner start
</code></pre></li>
</ol>
<ul>
<li>注册Runner</li>
</ul>
<p>【注意】<code>Runner</code>与<code>GitLab</code>需要安装在不同的服务器上<br><br>还是<code>Windows</code>下:</p>
<ol>
<li>运行以下命令：<pre><code>$ ./gitlab-runner.exe register
</code></pre></li>
<li>输入GitLab实例URL(部署GitLab的服务器地址)<pre><code>Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )
https://gitlab.com
</code></pre></li>
<li>输入您获得的注册Runner的令牌：<pre><code>Please enter the gitlab-ci token for this runner
xxx
</code></pre></li>
<li>567步骤直接点击enter下一步</li>
<li>选择Runner executor</li>
</ol>
<p>我选择<code>shell</code></p>
<pre><code>Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:
docker
</code></pre><ul>
<li>配置.gitlab-ci.yml<pre><code>stages:
- build
build:
stage: build
script:
  - yarn install
  - yarn build
  - rm -r D:\\webapp\\devops
  - mkdir D:\\webapp\\devops
  - cp -r dist/* D:\\webapp\\devops
</code></pre></li>
</ul>
<p>以上，未完待续，至于什么时候补充，emmmm，我得买个服务器，公司内的不好瞎搞。。。</p>
</div>
    </div>
  </div>
</article>
			</div>
		</div>
	</body>
	<!-- <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script> -->
	<!-- <script src="/js/index.js"></script> -->
</html>
<!DOCTYPE html>
<html lang="zh-CN">

	<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg"
    crossorigin="anonymous">
  <title>Fe</title>
  <link rel="stylesheet" href="/css/typo.css">
  <link rel="stylesheet" href="/css/fonts.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/scroll.css">
<link rel="stylesheet" href="/css/prism-base16-ateliersulphurpool.light.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
	
	<body>
		<div class="container">
			<div class="nav">
  <div class="nav-title">
    <a href="/">Fe</a>
  </div>
  <div class="nav-toggle-nav">
    <i class="fy-menu"></i>
  </div>
</div>
			<div class="left-col">
  <div class="left-col-close">
    <i class="fy-cross"></i>
  </div>

  <div class="left-col-author-profile">
    <nav class="profile">
      <a class="profile-pic"><img src="/img/xiaomai.jpg"/></a>
      <h1 class="profile-title">Fe_</h1>
      <p class="profile-subtitle">无疾而终是常态</p>
    </nav>
    <nav class="social">
      
      <a class="twitter2" target="_blank" href="#" title="twitter2">
        <i class="fy-twitter2"></i>
      </a>
      
      <a class="facebook2" target="_blank" href="#" title="facebook2">
        <i class="fy-facebook2"></i>
      </a>
      
      <a class="github" target="_blank" href="#" title="github">
        <i class="fy-github"></i>
      </a>
      
      <a class="google" target="_blank" href="#" title="google">
        <i class="fy-google"></i>
      </a>
      
      <a class="dribbble2" target="_blank" href="#" title="dribbble2">
        <i class="fy-dribbble2"></i>
      </a>
      
      <a class="instagram2" target="_blank" href="#" title="instagram2">
        <i class="fy-instagram2"></i>
      </a>
      
      <a class="zhihu" target="_blank" href="#" title="zhihu">
        <i class="fy-zhihu"></i>
      </a>
      
      <a class="segmentfault" target="_blank" href="#" title="segmentfault">
        <i class="fy-segmentfault"></i>
      </a>
      
    </nav>
    <nav class="left-col-lists">
      <ul>
        
          <li class="">
            <a href="/">首页</a>
          </li>
        
          <li class="">
            <a href="/felearning">前端学习</a>
          </li>
        
          <li class="">
            <a href="/experience">日常心得</a>
          </li>
        
          <li class="">
            <a href="/about">关于我</a>
          </li>
        
          <li class="">
            <a href="/donation">捐赠</a>
          </li>
        
      </ul>
    </nav>
  </div>

  <footer class="left-col-footer">
     Copyright © Fe . 2018 • All rights reserved.<br/>
     浙ICP备18014378号-1
  </footer>
</div>
			<!-- <div class="left-col">
  <div class="left-sidebar-nav">
    <div class="sidebar-nav-title"><a href="#">最新文章</a></div>
    <div class="sidebar-nav-search"><i class="fy-search"></i></div>
  </div>
  <div class="left-sidebar-tags">
    <h2>文章分类</h2>
    <ul class="sidebar-tags">
      <li class="tag box-tag">前端学习1</li>
      <li class="tag box-tag">前端学习2</li>
      <li class="tag box-tag">前端学习3</li>
      <li class="tag box-tag">前端学习4</li>
    </ul>
  </div>
  <div class="left-sidebar-post">
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/04/27/index/"></a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2018-04-27 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2017/07/04/about-es5/">ES5 Notes</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2017-07-04 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2017/07/04/about-es6-vs-es5/">ES6 Notes</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2017-07-04 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/02/05/gitlab-ci/">关于gitlab-ci自动化部署的探索</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2018-02-05 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/03/08/gitlab-ci-error/">一个CSS模块导致的gitlab-ci报错</a></div>
        <div class="post-card-content-info">&lt;p&gt;项目用&lt;code&gt;gitlab-ci&lt;/code&gt;进行持续集成，遇到了一个问题至今虽已解决却仍存在一些困惑。&lt;br&gt;&lt;br&gt;</div>
        <div class="post-card-content-time">2018-03-08 | 无评论</div>
      </div>
    </div>
    
    <div class="post-card">
      <div class="post-card-content">
        <div class="post-card-content-tag">前端学习</div>
        <div class="post-card-content-title"><a class="post-title" href="/2018/03/16/闲言闲语/">闲言闲语</a></div>
        <div class="post-card-content-info"></div>
        <div class="post-card-content-time">2018-03-16 | 无评论</div>
      </div>
    </div>
    
  </div>
</div> -->
			<div class="right-col">
				<article class="article article-post">
  <div class="article-inner">
    <div class="article-header">
      <!-- <div class="article-info-tag">
        
          data
        
          length
        
          _model
        
          _schema
        
          count
        
          size
        
          forEach
        
          each
        
          toArray
        
          eq
        
          first
        
          last
        
          slice
        
          limit
        
          skip
        
          reverse
        
          shuffle
        
          random
        
          find
        
          findOne
        
          sort
        
          map
        
          reduce
        
          reduceRight
        
          filter
        
          every
        
          some
        
          update
        
          replace
        
          remove
        
          populate
        
      </div> -->
    </div>
    <div class="article-info">
      <div class="article-info-title">ES6 Notes</div>
      <div class="article-info-content"><h3 id="let-const"><a href="#let-const" class="headerlink" title="let const"></a>let const</h3><p>ES6明确规定，如果区块中存在let和const命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错。</p>
<p>在let命令声明变量tmp之前，都属于变量tmp的“死区”。<br>“暂时性死区”也意味着typeof不再是一个百分之百安全的操作。</p>
<pre><code>typeof x; // ReferenceError
let x;
</code></pre><p>ES6规定暂时性死区和let、const语句不出现变量提升，主要是为了减少运行时错误，防止在变量声明前就使用这个变量，从而导致意料之外的行为。</p>
<h3 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h3><p>任何有length属性的对象，都可以通过Array.from方法转为数组<br>对于还没有部署该方法的浏览器</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> toArray <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
  Array<span class="token punctuation">.</span><span class="token keyword">from</span> <span class="token operator">?</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span> <span class="token punctuation">:</span> obj <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="深入理解Promise"><a href="#深入理解Promise" class="headerlink" title="深入理解Promise"></a>深入理解Promise</h3><p><a href="https://juejin.im/post/597724c26fb9a06bb75260e8" target="_blank" rel="external">八段代码彻底掌握 Promise</a></p>
<h4 id="1-Promise-的立即执行性"><a href="#1-Promise-的立即执行性" class="headerlink" title="1. Promise 的立即执行性"></a>1. Promise 的立即执行性</h4><p>在创建（new）Promise时，作为Promise参数传入的函数是会被立即执行的</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span>reject<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"test one"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"test two"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
test<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="2-Promised-三种状态"><a href="#2-Promised-三种状态" class="headerlink" title="2. Promised 三种状态"></a>2. Promised 三种状态</h4><p>pending resolved rejected</p>
<p>当Promise刚刚创建完成，处于pending状态</p>
<p>当Promise的函数参数执行了resolve后，状态由pending-&gt;resolved状态</p>
<p>当执行了reject方法后，状态由pending-&gt;rejected状态</p>
<h4 id="3-Promise的不可逆性"><a href="#3-Promise的不可逆性" class="headerlink" title="3. Promise的不可逆性"></a>3. Promise的不可逆性</h4><p>Promise状态的一旦变成resolved或rejected时，Promise的状态和值就固定下来了</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"success1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"success2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"reject"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p2<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token string">"success1"</span>
<span class="token string">"success"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="4-链式调用"><a href="#4-链式调用" class="headerlink" title="4. 链式调用"></a>4. 链式调用</h4><p>Promise对象的then方法返回一个新的Promise对象，<br>因此可以通过链式调用then方法。then方法接收两个函数作为参数，<br>第一个参数是Promise执行成功时的回调，<br>第二个参数是Promise执行失败时的回调。<br>两个函数只会有一个被调用，函数的返回值将被用作创建then返回的Promise对象</p>
<p><em>1</em> return 一个同步的值 ，<br>或者 undefined（当没有返回一个有效值时，默认返回undefined），<br>then方法将返回一个resolved状态的Promise对象，<br>Promise对象的值就是这个返回值。</p>
<p><em>2</em> return 另一个 Promise，then方法将根据这个Promise的状态和值创建一个新的Promise对象返回。</p>
<p><em>3</em> throw 一个同步异常，then方法将返回一个rejected状态的Promise, 值是该异常。</p>
<h4 id="5-Promise-then-回调异步性"><a href="#5-Promise-then-回调异步性" class="headerlink" title="5. Promise then() 回调异步性"></a>5. Promise then() 回调异步性</h4><p>Promise接收的函数参数是同步执行的，但then方法中的回调函数执行则是异步的</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span>reject<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token string">"which one is called first ?"</span>
<span class="token string">"success"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="6-Promise中的异常"><a href="#6-Promise中的异常" class="headerlink" title="6. Promise中的异常"></a>6. Promise中的异常</h4><p>Promise中的异常由then参数中第二个回调函数（Promise执行失败的回调）处理，<br>异常信息将作为Promise的值。<br>异常一旦得到处理，then返回的后续Promise对象将恢复正常，<br>并会被Promise执行成功的回调函数处理。<br>另外，需要注意p1、p2 多级then的回调函数是交替执行的 ，这正是由Promise then回调的异步性决定的。</p>
<h4 id="7-Promise-resolve"><a href="#7-Promise-resolve" class="headerlink" title="7. Promise.resolve()"></a>7. Promise.resolve()</h4><p>Promise.resolve(…)可以接收一个值或者是一个Promise对象作为参数。<br>当参数是普通值时，它返回一个resolved状态的Promise对象，对象的值就是这个参数；<br>当参数是一个Promise对象时，它直接返回这个Promise参数。</p>
<h4 id="8-resolve-vs-reject"><a href="#8-resolve-vs-reject" class="headerlink" title="8. resolve vs reject"></a>8. resolve vs reject</h4></div>
    </div>
  </div>
</article>
			</div>
		</div>
	</body>
	<!-- <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script> -->
	<!-- <script src="/js/index.js"></script> -->
</html>